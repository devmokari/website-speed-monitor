<!DOCTYPE html>
<html>
<head>
<title>Inspector Results</title>
<style>
body { font-family: Arial; padding: 20px; }
#json { white-space: pre; background:#f5f5f5; padding:10px; border-radius:6px; }
select { padding:6px; font-size:16px; }
</style>
</head>
<body>
<h2>Inspector Results</h2>

<label>Select URL:</label>
<select id="urls"></select>

<pre id="json"></pre>

<script>
async function loadUrls() {
  const res = await fetch("/urls");
  const data = await res.json();
  const dropdown = document.getElementById("urls");
  dropdown.innerHTML = "";

  data.urls.forEach(url => {
    const opt = document.createElement("option");
    opt.value = url;
    opt.textContent = url;
    dropdown.appendChild(opt);
  });

  if (data.urls.length > 0) fetchData(data.urls[0]);
}

async function fetchData(url) {
  const res = await fetch("/data?url=" + encodeURIComponent(url));
  const json = await res.json();
  document.getElementById("json").textContent = JSON.stringify(json, null, 2);
}

document.getElementById("urls").addEventListener("change", e => {
  fetchData(e.target.value);
});

loadUrls();
</script>
</body>
</html>
